# 网页框架组件 - 需求文档

## 模块定位

网页框架组件是公共基础层的界面组件,封装iframe提供网页嵌入能力。它处理iframe的安全沙箱、通信控制、加载管理,让网页内容安全地嵌入到卡片中。

## 功能需求

支持加载网页,传入URL加载外部网页,或传入HTML字符串加载内容。支持安全沙箱,限制iframe的权限,防止恶意脚本访问父窗口或执行危险操作。

支持通信控制,父窗口和iframe之间可以通信,但通信要经过验证和过滤。支持消息白名单,只允许特定类型的消息通过。

支持加载状态显示,加载时显示加载动画,加载完成显示内容,加载失败显示错误提示。支持刷新,重新加载iframe内容。

支持响应式布局,iframe自动调整大小填充容器,或固定宽高比例。支持滚动控制,可以禁用iframe的滚动条。

支持导航控制,监听iframe的导航事件,可以拦截或允许导航。支持打开链接,iframe内的链接可以在新窗口打开,或在当前iframe打开,或被拦截。

## 接口需求

提供创建iframe的接口,传入容器和配置,配置包括URL、沙箱规则、是否允许脚本等。提供加载内容的接口,加载新的URL或HTML。提供发送消息的接口,向iframe发送消息。提供监听消息的接口,接收iframe发送的消息。

## 非功能需求

iframe加载要快速,不阻塞主页面。沙箱要安全,严格限制iframe权限,防止恶意代码。通信要可靠,消息正确传递,不丢失不篡改。
