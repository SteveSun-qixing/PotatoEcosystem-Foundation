# 薯片公共基础层 - 产品概述

## 产品定位

薯片公共基础层是整个生态的基础设施，位于微内核之上，为所有软件和插件提供通用功能模块、运行环境和依赖库。

## 核心价值

让生态内的所有插件和软件共享同一套基础能力，避免重复开发。插件开发者不需要自己实现视频播放、图片显示等基础功能，直接调用基础层提供的组件即可。

## 架构层级

微内核 → 公共基础层 → 功能插件 → 软件产品

微内核提供中心路由和模块管理。公共基础层提供通用组件和运行环境。功能插件实现业务逻辑。软件产品组合插件形成应用。

## 包含内容

### 核心运行环境
- Chromium 内核：网页渲染引擎
- Electron 框架：桌面应用封装
- 运行时环境：JavaScript 执行环境

### 卡片渲染模块
- 卡片渲染引擎：完整的卡片解析和渲染
- 基础卡片渲染器：26种基础卡片的渲染逻辑
- 箱子渲染引擎：箱子的解析和布局渲染
- 主题引擎：主题包的加载和应用

### 媒体组件
- 视频播放器：视频解码和播放
- 音频播放器：音频播放和波形显示
- 图片查看器：图片显示和基础操作
- 3D 渲染器：三维模型显示

### 文本组件
- 富文本渲染器：格式化文本显示
- Markdown 解析器：Markdown 转 HTML
- 代码高亮器：语法高亮
- 文本编辑器：基础文本编辑

### 文件处理
- ZIP 处理器：压缩包创建和解析
- 文件识别器：文件类型判断
- 格式转换器：常见格式转换

### 网络模块
- HTTP 客户端：网络请求
- 下载管理器：文件下载
- 缓存管理器：资源缓存
- 协议适配器：网络存储协议支持

### 界面组件
- 基础控件库：按钮、输入框等
- 窗口管理器：窗口操作
- 拖拽系统：拖动处理
- 网页框架组件：iframe 封装

### 系统服务
- 数据序列化：YAML、JSON 处理
- 日志系统：统一日志记录
- 多语言系统：国际化支持
- 配置管理器：配置读写

##设计原则

模块高度解耦，每个模块独立开发和维护。接口风格高度一致，所有模块使用统一的调用规范。职责单一明确，每个模块只负责一个核心功能。按需加载，模块在需要时才加载。

轻量化设计，只包含通用必需的功能。不包含业务逻辑，不包含身份认证和权限管理，不包含数据同步和云端功能。使用成熟的开源库，不重复造轮子。

## 使用方式

功能插件通过微内核的路由系统调用基础层模块。请求发送到微内核，微内核路由到基础层的对应模块，模块处理后返回结果。

软件开发工具包封装了基础层的能力，提供友好的开发接口。第三方开发者通过开发工具包可以使用所有基础层功能。

软件制作器打包时自动分析依赖，只打包软件实际使用的基础层模块，减小软件体积。
